<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Makeup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="text-center mb-4">Edit Makeup</h1>
        <div class="card p-4">
            <form action="/makeups/<%= makeup._id %>/edit?_method=PATCH" method="POST" id="editMakeupForm">
                <div class="mb-3">
                    <label for="identifier" class="form-label">Makeup ID:</label>
                    <input type="text" class="form-control" id="identifier" value="<%= makeup.id %>" disabled>
                </div>
                <div class="mb-3">
                    <label for="name" class="form-label">Makeup Name:</label>
                    <input type="text" class="form-control" id="name" name="name" value="<%= makeup.name %>" required>
                </div>
                <div class="mb-3">
                    <label for="category" class="form-label">Makeup Category:</label>
                    <input type="text" class="form-control" id="category" name="category" value="<%= makeup.category %>" required>
                </div>
                <div class="mb-3">
                    <label for="quantity" class="form-label">Makeup Quantity:</label>
                    <input type="number" class="form-control" id="quantity" name="quantity" value="<%= makeup.quantity %>" required>
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">Makeup Price:</label>
                    <input type="number" class="form-control" id="price" name="price" value="<%= makeup.price %>" required>
                </div>
                <div class="mb-3">
                    <label for="description" class="form-label">Makeup Description:</label>
                    <textarea class="form-control" id="description" name="description" rows="4" required><%= makeup.description %></textarea>
                </div>
                <button type="submit" class="btn btn-primary" id="updateButton" disabled>UPDATE</button>
                <a href="/makeups" class="btn btn-secondary">View All Makeups</a>
            </form>
        </div>
    </div>
    <script>
        const form = document.getElementById('editMakeupForm');
        const updateButton = document.getElementById('updateButton');

        const initialData = {
            name: form.name.value,
            category: form.category.value,
            quantity: form.quantity.value,
            price: form.price.value,
            description: form.description.value
        };

        const isFormChanged = () => {
            return (
                form.name.value !== initialData.name ||
                form.category.value !== initialData.category ||
                form.quantity.value !== initialData.quantity ||
                form.price.value !== initialData.price ||
                form.description.value !== initialData.description
            );
        };

        form.addEventListener('input', () => {
            updateButton.disabled = !isFormChanged();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>